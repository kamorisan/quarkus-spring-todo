# Quarkus vs Spring Boot ãƒ‡ãƒ¢å®Ÿè¡Œã‚¬ã‚¤ãƒ‰ï¼ˆ3-Wayæ¯”è¼ƒç‰ˆï¼‰

## ğŸ“‹ ãƒ‡ãƒ¢ã®æ¦‚è¦

ã“ã®ãƒ‡ãƒ¢ã§ã¯ã€**3ç¨®é¡ã®å®Ÿè¡Œãƒ¢ãƒ¼ãƒ‰**ã§ Todoç®¡ç†ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å®Ÿè£…ã—ã€ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã‚’æ¯”è¼ƒã—ã¾ã™ï¼š

1. **Quarkus Native Image** - GraalVMã§ãƒã‚¤ãƒ†ã‚£ãƒ–ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«
2. **Quarkus JVM** - æ¨™æº–JVMä¸Šã§å®Ÿè¡Œ
3. **Spring Boot JVM** - æ¨™æº–JVMä¸Šã§å®Ÿè¡Œ

### æ¯”è¼ƒé …ç›®

| æ¯”è¼ƒé …ç›® | èª¬æ˜ | é‡è¦æ€§ |
|---------|------|--------|
| **èµ·å‹•æ™‚é–“** | ãƒ—ãƒ­ã‚»ã‚¹èµ·å‹•ã‹ã‚‰Readyå¿œç­”ã¾ã§ã®æ™‚é–“ | â­â­â­ |
| **ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡** | ã‚¢ã‚¤ãƒ‰ãƒ«æ™‚ã®å¸¸é§ãƒ¡ãƒ¢ãƒªã‚µã‚¤ã‚º (RSS) | â­â­â­ |
| **CPUä½¿ç”¨ç‡** | ã‚¢ã‚¤ãƒ‰ãƒ«æ™‚ã®CPUä½¿ç”¨ç‡ | â­â­ |
| **ãƒã‚¤ãƒŠãƒªã‚µã‚¤ã‚º** | å®Ÿè¡Œãƒ•ã‚¡ã‚¤ãƒ«ã®ã‚µã‚¤ã‚º | â­â­ |

### ãªãœ3-Wayæ¯”è¼ƒï¼Ÿ

| æ¯”è¼ƒ | ã‚ã‹ã‚‹ã“ã¨ |
|------|----------|
| Quarkus Native vs JVM | ãƒã‚¤ãƒ†ã‚£ãƒ–ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã®åŠ¹æœ |
| Quarkus JVM vs Spring JVM | ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯è‡ªä½“ã®å·® |
| Quarkus Native vs Spring JVM | æœ€å¤§ã®å·®ï¼ˆãƒˆãƒ¼ã‚¿ãƒ«åŠ¹æœï¼‰ |

---

## ğŸ”§ å‰ææ¡ä»¶

### å¿…é ˆç’°å¢ƒ

```bash
# Java 21ç¢ºèª
java -version
# å‡ºåŠ›ä¾‹: openjdk version "21.0.x" ...

# Mavenç¢ºèª
mvn -version
# å‡ºåŠ›ä¾‹: Apache Maven 3.x.x

# Dockerç¢ºèªï¼ˆNative Imageç”¨ï¼‰
docker --version
# å‡ºåŠ›ä¾‹: Docker version 24.x.x
```

### Native Imageãƒ“ãƒ«ãƒ‰ã®é¸æŠè‚¢

**ã‚ªãƒ—ã‚·ãƒ§ãƒ³1**: Docker/Podman ã‚’ä½¿ç”¨ï¼ˆæ¨å¥¨ï¼‰
- GraalVMã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ä¸è¦
- ã‚¯ãƒ­ã‚¹ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ å¯¾å¿œ

**ã‚ªãƒ—ã‚·ãƒ§ãƒ³2**: GraalVM ã‚’ãƒ­ãƒ¼ã‚«ãƒ«ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
- ãƒ“ãƒ«ãƒ‰ãŒé«˜é€Ÿ
- ãƒã‚¤ãƒ†ã‚£ãƒ–ç’°å¢ƒã§ç›´æ¥ãƒ“ãƒ«ãƒ‰

```bash
# GraalVMã®ç¢ºèªï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³2ã®å ´åˆï¼‰
java -version | grep GraalVM
native-image --version
```

---

## ğŸ—ï¸ ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

### 1. JVMãƒ¢ãƒ¼ãƒ‰ã®ãƒ“ãƒ«ãƒ‰

```bash
# Quarkus JVM
cd quarkus-todo
mvn clean package -DskipTests
cd ..

# Spring Boot JVM
cd spring-todo
mvn clean package -DskipTests
cd ..
```

### 2. Native Imageã®ãƒ“ãƒ«ãƒ‰

```bash
# Dockerã‚’ä½¿ç”¨ã—ãŸãƒ“ãƒ«ãƒ‰ï¼ˆæ¨å¥¨ï¼‰
./build_native.sh
```

ã“ã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆã¯è‡ªå‹•çš„ã«ï¼š
- GraalVMã®æœ‰ç„¡ã‚’ç¢ºèª
- GraalVMãŒãªã„å ´åˆã¯Dockerã§ãƒ“ãƒ«ãƒ‰
- Native binaryã‚’ `quarkus-todo/target/` ã«ç”Ÿæˆ

**ãƒ“ãƒ«ãƒ‰æ™‚é–“**: ç´„3-10åˆ†ï¼ˆãƒã‚·ãƒ³ã‚¹ãƒšãƒƒã‚¯ã«ã‚ˆã‚‹ï¼‰

**ãƒ“ãƒ«ãƒ‰æˆæœç‰©**:
```bash
# ãƒã‚¤ãƒŠãƒªã‚µã‚¤ã‚ºç¢ºèª
ls -lh quarkus-todo/target/quarkus-todo-1.0.0-SNAPSHOT-runner
# å‡ºåŠ›ä¾‹: 60-80 MB
```

---

## ğŸš€ ãƒ‡ãƒ¢å®Ÿè¡Œæ–¹æ³•

### æ–¹æ³•1: è‡ªå‹•3-Wayãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ï¼ˆæ¨å¥¨ï¼‰

```bash
./bench/run_benchmark.sh
```

**å®Ÿè¡Œãƒ•ãƒ­ãƒ¼**:
```
1. Quarkus Nativeèµ·å‹• â†’ è¨ˆæ¸¬(60ç§’) â†’ åœæ­¢
   â†“
2. Quarkus JVMèµ·å‹• â†’ è¨ˆæ¸¬(60ç§’) â†’ åœæ­¢
   â†“
3. Spring Boot JVMèµ·å‹• â†’ è¨ˆæ¸¬(60ç§’) â†’ åœæ­¢
   â†“
4. çµæœã‚µãƒãƒªãƒ¼è‡ªå‹•è¡¨ç¤º
```

**å®Ÿè¡Œæ™‚é–“**: ç´„4-5åˆ†

**Native ImageãŒãªã„å ´åˆ**:
- Quarkus Nativeã‚’ã‚¹ã‚­ãƒƒãƒ—
- Quarkus JVM vs Spring Boot JVMã®2-Wayæ¯”è¼ƒã‚’å®Ÿè¡Œ

### æ–¹æ³•2: å€‹åˆ¥å®Ÿè¡Œ

#### Quarkus Native

```bash
# èµ·å‹•
./bench/run_quarkus_native.sh

# Readyå¾…æ©Ÿ
./bench/wait_ready.sh http://localhost:8081/health/ready

# ãƒ¡ãƒˆãƒªã‚¯ã‚¹è¨ˆæ¸¬
./bench/measure_idle.sh $(cat bench/quarkus-native.pid) 60 results/quarkus-native_idle.csv

# åœæ­¢
kill $(cat bench/quarkus-native.pid)
```

#### Quarkus JVM

```bash
# èµ·å‹•
./bench/run_quarkus.sh

# Readyå¾…æ©Ÿ
./bench/wait_ready.sh http://localhost:8081/health/ready

# ãƒ¡ãƒˆãƒªã‚¯ã‚¹è¨ˆæ¸¬
./bench/measure_idle.sh $(cat bench/quarkus.pid) 60 results/quarkus_idle.csv

# åœæ­¢
kill $(cat bench/quarkus.pid)
```

#### Spring Boot JVM

```bash
# èµ·å‹•
./bench/run_spring.sh

# Readyå¾…æ©Ÿ
./bench/wait_ready.sh http://localhost:8082/health/ready

# ãƒ¡ãƒˆãƒªã‚¯ã‚¹è¨ˆæ¸¬
./bench/measure_idle.sh $(cat bench/spring.pid) 60 results/spring_idle.csv

# åœæ­¢
kill $(cat bench/spring.pid)
```

---

## ğŸ“Š æœŸå¾…ã•ã‚Œã‚‹çµæœ

### å…¸å‹çš„ãªãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯çµæœ

```
=========================================
  Quarkus vs Spring Boot Benchmark Summary
  (3-Way Comparison)
=========================================

Quarkus Native Startup Time: 15ms
Quarkus JVM Startup Time: 51ms
Spring Boot JVM Startup Time: 712ms

-----------------------------------------
Memory Usage (Idle)
-----------------------------------------
Quarkus Native Max RSS: 51200 KB (50 MB)
Quarkus Native Avg RSS: 49152 KB (48 MB)
Quarkus JVM Max RSS: 229120 KB (224 MB)
Quarkus JVM Avg RSS: 229011 KB (224 MB)
Spring Boot JVM Max RSS: 323168 KB (316 MB)
Spring Boot JVM Avg RSS: 323080 KB (316 MB)

-----------------------------------------
CPU Usage (Idle)
-----------------------------------------
Quarkus Native Max CPU: 0.2%
Quarkus Native Avg CPU: 0.1%
Quarkus JVM Max CPU: 0.5%
Quarkus JVM Avg CPU: 0.2%
Spring Boot JVM Max CPU: 0.8%
Spring Boot JVM Avg CPU: 0.3%

=========================================

Summary Comparison:

Startup Time Comparison:
  Quarkus Native: 15ms (1.0x baseline)
  Quarkus JVM:    51ms (3.4x slower than Native)
  Spring JVM:     712ms (47.5x slower than Native)

Memory Usage Comparison (Average):
  Quarkus Native: 48 MB
  Quarkus JVM:    224 MB
  Spring JVM:     316 MB
  Native saves 78.6% vs Quarkus JVM
  Native saves 84.8% vs Spring JVM

=========================================
```

### çµæœã®è§£é‡ˆ

| é …ç›® | Quarkus Native | Quarkus JVM | Spring Boot JVM |
|------|---------------|-------------|-----------------|
| **èµ·å‹•æ™‚é–“** | 10-20ms âš¡âš¡âš¡ | 50-200ms âš¡âš¡ | 500-1500ms âš¡ |
| **ãƒ¡ãƒ¢ãƒª** | 30-60MB ğŸ’šğŸ’šğŸ’š | 200-300MB ğŸ’šğŸ’š | 300-450MB ğŸ’š |
| **CPU** | 0.1-0.3% ğŸ”‹ğŸ”‹ğŸ”‹ | 0.2-0.5% ğŸ”‹ğŸ”‹ | 0.3-1.0% ğŸ”‹ |
| **ãƒã‚¤ãƒŠãƒªã‚µã‚¤ã‚º** | 60-80MB | ~0.7MB (thin JAR) | ~57MB (fat JAR) |

### é‡è¦ãªãƒã‚¤ãƒ³ãƒˆ

#### èµ·å‹•æ™‚é–“
- **Quarkus Native**: Spring Boot JVMã® **ç´„40-70å€é«˜é€Ÿ** ğŸš€
- **Quarkus JVM**: Spring Boot JVMã® **ç´„10-14å€é«˜é€Ÿ**

#### ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡
- **Quarkus Native**: Spring Boot JVMã® **ç´„15-20%** ã®ãƒ¡ãƒ¢ãƒª ğŸ’š
- **Quarkus JVM**: Spring Boot JVMã® **ç´„70%** ã®ãƒ¡ãƒ¢ãƒª

#### ãªãœã“ã‚Œã»ã©å·®ãŒå‡ºã‚‹ã®ã‹ï¼Ÿ

**Quarkus Nativeã®å„ªä½æ€§**:
1. ãƒ“ãƒ«ãƒ‰æ™‚æœ€é©åŒ–ï¼ˆãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿å‡¦ç†ã€ã‚¯ãƒ©ã‚¹ãƒ‘ã‚¹ã‚¹ã‚­ãƒ£ãƒ³ï¼‰
2. JVMèµ·å‹•ä¸è¦ï¼ˆç›´æ¥å®Ÿè¡Œï¼‰
3. AOTï¼ˆAhead-of-Timeï¼‰ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«
4. ä½¿ç”¨ã—ãªã„ã‚³ãƒ¼ãƒ‰ã®å‰Šé™¤

**Quarkus JVMã®å„ªä½æ€§**:
1. ãƒ“ãƒ«ãƒ‰æ™‚æœ€é©åŒ–ï¼ˆä¸€éƒ¨ï¼‰
2. è»½é‡ãªDIï¼ˆArcï¼‰
3. é…å»¶åˆæœŸåŒ–

---

## ğŸ¯ å„å®Ÿè¡Œãƒ¢ãƒ¼ãƒ‰ã®ç‰¹å¾´ã¨ç”¨é€”

### Quarkus Native Image

**ãƒ¡ãƒªãƒƒãƒˆ**:
- âœ… èµ·å‹•ãŒè¶…é«˜é€Ÿï¼ˆãƒŸãƒªç§’ãƒ¬ãƒ™ãƒ«ï¼‰
- âœ… ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡ãŒæ¥µå°
- âœ… CPUã‚¢ã‚¤ãƒ‰ãƒ«æ™‚ã®æ¶ˆè²»ãŒæœ€å°

**ãƒ‡ãƒ¡ãƒªãƒƒãƒˆ**:
- âŒ ãƒ“ãƒ«ãƒ‰æ™‚é–“ãŒé•·ã„ï¼ˆ3-10åˆ†ï¼‰
- âŒ ä¸€éƒ¨ã®Javaãƒ©ã‚¤ãƒ–ãƒ©ãƒªã«åˆ¶é™
- âŒ ãƒªãƒ•ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ç­‰ã¯è¨­å®šãŒå¿…è¦

**æœ€é©ãªç”¨é€”**:
- ã‚µãƒ¼ãƒãƒ¼ãƒ¬ã‚¹ï¼ˆAWS Lambdaã€Azure Functionsï¼‰
- Kubernetesï¼ˆé »ç¹ãªã‚¹ã‚±ãƒ¼ãƒ«ï¼‰
- ã‚³ãƒ³ãƒ†ãƒŠç’°å¢ƒï¼ˆãƒªã‚½ãƒ¼ã‚¹åˆ¶ç´„ï¼‰
- ãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹

### Quarkus JVM

**ãƒ¡ãƒªãƒƒãƒˆ**:
- âœ… ãƒ“ãƒ«ãƒ‰ãŒé«˜é€Ÿ
- âœ… å…¨Javaãƒ©ã‚¤ãƒ–ãƒ©ãƒªãŒåˆ©ç”¨å¯èƒ½
- âœ… èµ·å‹•ãŒSpring Bootã‚ˆã‚Šé«˜é€Ÿ
- âœ… ãƒ¡ãƒ¢ãƒªåŠ¹ç‡ãŒSpring Bootã‚ˆã‚Šè‰¯ã„

**ãƒ‡ãƒ¡ãƒªãƒƒãƒˆ**:
- âŒ Native Imageã»ã©é«˜é€Ÿã§ã¯ãªã„

**æœ€é©ãªç”¨é€”**:
- é–‹ç™ºç’°å¢ƒ
- Nativeãƒ“ãƒ«ãƒ‰ã®åˆ¶ç´„ãŒã‚ã‚‹å ´åˆ
- é•·æ™‚é–“ç¨¼åƒã™ã‚‹ã‚µãƒ¼ãƒ“ã‚¹

### Spring Boot JVM

**ãƒ¡ãƒªãƒƒãƒˆ**:
- âœ… è±Šå¯Œãªã‚¨ã‚³ã‚·ã‚¹ãƒ†ãƒ 
- âœ… æˆç†Ÿã—ãŸãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯
- âœ… å¤§è¦æ¨¡ãªã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£

**ãƒ‡ãƒ¡ãƒªãƒƒãƒˆ**:
- âŒ èµ·å‹•ãŒé…ã„
- âŒ ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡ãŒå¤šã„

**æœ€é©ãªç”¨é€”**:
- æ—¢å­˜Springç’°å¢ƒã¨ã®çµ±åˆ
- Springå›ºæœ‰æ©Ÿèƒ½ãŒå¿…é ˆã®å ´åˆ
- é•·æ™‚é–“ç¨¼åƒã™ã‚‹å¤§è¦æ¨¡ã‚¢ãƒ—ãƒª

---

## ğŸ’¡ å®Ÿéš›ã®ãƒ“ã‚¸ãƒã‚¹ã‚¤ãƒ³ãƒ‘ã‚¯ãƒˆ

### ã‚±ãƒ¼ã‚¹ã‚¹ã‚¿ãƒ‡ã‚£1: Kubernetesãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹

**å‰æ**: 100ãƒãƒƒãƒ‰ã‚’ç¨¼åƒ

| å®Ÿè¡Œãƒ¢ãƒ¼ãƒ‰ | ãƒ¡ãƒ¢ãƒª/Pod | ç·ãƒ¡ãƒ¢ãƒª | ãƒãƒ¼ãƒ‰æ•° (16GB/node) | ã‚³ã‚¹ãƒˆ |
|-----------|-----------|---------|---------------------|--------|
| Spring Boot JVM | 316 MB | 31.6 GB | 2ãƒãƒ¼ãƒ‰ | $$$ |
| Quarkus JVM | 224 MB | 22.4 GB | 2ãƒãƒ¼ãƒ‰ | $$ |
| Quarkus Native | 48 MB | 4.8 GB | 1ãƒãƒ¼ãƒ‰ | $ |

**å‰Šæ¸›åŠ¹æœ**:
- ãƒ¡ãƒ¢ãƒª: **84.8%å‰Šæ¸›** (31.6GB â†’ 4.8GB)
- ãƒãƒ¼ãƒ‰: **50%å‰Šæ¸›** (2ãƒãƒ¼ãƒ‰ â†’ 1ãƒãƒ¼ãƒ‰)
- ã‚³ã‚¹ãƒˆ: **ç´„50%å‰Šæ¸›**

### ã‚±ãƒ¼ã‚¹ã‚¹ã‚¿ãƒ‡ã‚£2: ã‚µãƒ¼ãƒãƒ¼ãƒ¬ã‚¹ï¼ˆAWS Lambdaï¼‰

**å‰æ**: 1æ—¥10ä¸‡ãƒªã‚¯ã‚¨ã‚¹ãƒˆã€å¹³å‡å®Ÿè¡Œæ™‚é–“200ms

| å®Ÿè¡Œãƒ¢ãƒ¼ãƒ‰ | ã‚³ãƒ¼ãƒ«ãƒ‰ã‚¹ã‚¿ãƒ¼ãƒˆ | ç·å®Ÿè¡Œæ™‚é–“ | æœˆé¡ã‚³ã‚¹ãƒˆ |
|-----------|---------------|-----------|----------|
| Spring Boot JVM | 700ms | 900ms | $$ |
| Quarkus JVM | 50ms | 250ms | $ |
| Quarkus Native | 15ms | 215ms | $ (æœ€å®‰) |

**å‰Šæ¸›åŠ¹æœ**:
- ã‚³ãƒ¼ãƒ«ãƒ‰ã‚¹ã‚¿ãƒ¼ãƒˆ: **95%å‰Šæ¸›** (700ms â†’ 15ms)
- ã‚³ã‚¹ãƒˆ: **ç´„40-50%å‰Šæ¸›**

---

## ğŸ”¬ è©³ç´°åˆ†æ: ãªãœãƒ¡ãƒ¢ãƒªå·®ãŒå¤§ãã„ã®ã‹ï¼Ÿ

### JVMãƒ¢ãƒ¼ãƒ‰åŒå£«ã®æ¯”è¼ƒï¼ˆQuarkus vs Springï¼‰

29%ã®ãƒ¡ãƒ¢ãƒªå‰Šæ¸›ï¼ˆ224MB â†’ 316MBï¼‰ã¯ä¸»ã«ï¼š
- Quarkus Arcï¼ˆè»½é‡DIï¼‰
- ãƒ“ãƒ«ãƒ‰æ™‚æœ€é©åŒ–
- èµ·å‹•æ™‚ã®ã‚¯ãƒ©ã‚¹ãƒ‘ã‚¹ã‚¹ã‚­ãƒ£ãƒ³å‰Šæ¸›

### Native vs JVMã®æ¯”è¼ƒ

78%ã®ãƒ¡ãƒ¢ãƒªå‰Šæ¸›ï¼ˆ224MB â†’ 48MBï¼‰ã¯ä¸»ã«ï¼š

```
JVMãƒ¢ãƒ¼ãƒ‰ (224MB):
  â”œâ”€ JVMãƒ©ãƒ³ã‚¿ã‚¤ãƒ : ~100MB
  â”œâ”€ ãƒ¡ã‚¿ã‚¹ãƒšãƒ¼ã‚¹: ~50MB
  â”œâ”€ ã‚³ãƒ¼ãƒ‰ã‚­ãƒ£ãƒƒã‚·ãƒ¥: ~40MB
  â””â”€ ã‚¢ãƒ—ãƒªãƒ’ãƒ¼ãƒ—: ~34MB

Native (48MB):
  â”œâ”€ ãƒã‚¤ãƒ†ã‚£ãƒ–ã‚³ãƒ¼ãƒ‰: ~30MB
  â””â”€ ãƒ’ãƒ¼ãƒ—: ~18MB
  (JVMãƒ©ãƒ³ã‚¿ã‚¤ãƒ ä¸è¦ï¼)
```

---

## ğŸ“ ãƒ‡ãƒ¢ãƒ—ãƒ¬ã‚¼ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³å°æœ¬

### 1. ã‚¤ãƒ³ãƒˆãƒ­ãƒ€ã‚¯ã‚·ãƒ§ãƒ³ï¼ˆ1åˆ†ï¼‰

ã€Œä»Šæ—¥ã¯ã€Quarkus Nativeã€Quarkus JVMã€Spring Boot JVMã®3ã¤ã‚’æ¯”è¼ƒã—ã¾ã™ã€‚åŒã˜Todoã‚¢ãƒ—ãƒªã‚’ã€3ã¤ã®æ–¹æ³•ã§å®Ÿè¡Œã—ã€èµ·å‹•æ™‚é–“ã¨ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡ã‚’å®Ÿæ¸¬ã—ã¾ã™ã€‚ã€

### 2. ãƒ“ãƒ«ãƒ‰ç¢ºèªï¼ˆ1åˆ†ï¼‰

```bash
# ãƒã‚¤ãƒŠãƒªã‚µã‚¤ã‚ºã‚’è¦‹ã›ã‚‹
ls -lh quarkus-todo/target/quarkus-todo-1.0.0-SNAPSHOT-runner
ls -lh quarkus-todo/target/quarkus-app/quarkus-run.jar
ls -lh spring-todo/target/spring-todo-0.0.1-SNAPSHOT.jar
```

ã€ŒNative Imageã¯ç´„70MBã®å˜ä¸€ãƒã‚¤ãƒŠãƒªã§ã™ã€‚ã€

### 3. ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯å®Ÿè¡Œï¼ˆ3-5åˆ†ï¼‰

```bash
./bench/run_benchmark.sh
```

ã€Œè‡ªå‹•ã§3ã¤ã‚’é †ç•ªã«èµ·å‹•ãƒ»è¨ˆæ¸¬ã—ã¾ã™ã€‚å„60ç§’ãšã¤è¨ˆæ¸¬ã—ã¾ã™ã€‚ã€

### 4. çµæœè§£èª¬ï¼ˆ2-3åˆ†ï¼‰

çµæœãŒè¡¨ç¤ºã•ã‚ŒãŸã‚‰ï¼š

ã€Œèµ·å‹•æ™‚é–“ã‚’è¦‹ã¦ãã ã•ã„ã€‚Quarkus Nativeã¯**15ãƒŸãƒªç§’**ã€Spring Bootã¯**712ãƒŸãƒªç§’**ã€‚ç´„**47å€ã®å·®**ã§ã™ã€‚ã€

ã€Œãƒ¡ãƒ¢ãƒªã‚‚è¦‹ã¦ãã ã•ã„ã€‚Nativeã¯**48MB**ã€Spring Bootã¯**316MB**ã€‚**ç´„85%å‰Šæ¸›**ã•ã‚Œã¦ã„ã¾ã™ã€‚ã€

### 5. ãƒ“ã‚¸ãƒã‚¹ä¾¡å€¤ï¼ˆ2åˆ†ï¼‰

ã€ŒKubernetesç’°å¢ƒã§100ãƒãƒƒãƒ‰ã‚’å‹•ã‹ã™å ´åˆã€Nativeãªã‚‰**1ãƒãƒ¼ãƒ‰**ã§æ¸ˆã¿ã¾ã™ãŒã€Spring Bootã ã¨**2ãƒãƒ¼ãƒ‰**å¿…è¦ã§ã™ã€‚**ã‚³ã‚¹ãƒˆãŒåŠåˆ†**ã«ãªã‚Šã¾ã™ã€‚ã€

### 6. ã¾ã¨ã‚ï¼ˆ1åˆ†ï¼‰

ã€ŒQuarkus Nativeã¯ã€ã‚µãƒ¼ãƒãƒ¼ãƒ¬ã‚¹ã€Kubernetesã€ãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹ã«æœ€é©ã§ã™ã€‚èµ·å‹•ãŒé€Ÿãã€ãƒ¡ãƒ¢ãƒªãŒå°‘ãªã„ãŸã‚ã€ã‚¯ãƒ©ã‚¦ãƒ‰ã‚³ã‚¹ãƒˆã‚’å¤§å¹…ã«å‰Šæ¸›ã§ãã¾ã™ã€‚ã€

---

## ğŸ” ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### Native Imageãƒ“ãƒ«ãƒ‰ãŒå¤±æ•—ã™ã‚‹

**ã‚¨ãƒ©ãƒ¼**: `native-image: command not found` ã‹ã¤ Docker ãŒãªã„

**è§£æ±ºç­–**:
```bash
# Dockerã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã‹ã€GraalVMã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
# macOS
brew install --cask docker

# ã¾ãŸã¯ GraalVM
brew install --cask graalvm-jdk
```

### Native Imageãƒ“ãƒ«ãƒ‰ãŒéå¸¸ã«é…ã„

**åŸå› **: Dockerãƒ“ãƒ«ãƒ‰ã¯ã‚¨ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãŒå¿…è¦ãªå ´åˆãŒã‚ã‚‹

**è§£æ±ºç­–**:
```bash
# ãƒ­ãƒ¼ã‚«ãƒ«GraalVMã§ãƒ“ãƒ«ãƒ‰ï¼ˆé«˜é€Ÿï¼‰
# 1. GraalVMã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
# 2. JAVA_HOMEã‚’è¨­å®š
export JAVA_HOME=/path/to/graalvm
./build_native.sh
```

### ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ä¸­ã«ãƒ—ãƒ­ã‚»ã‚¹ãŒè½ã¡ã‚‹

**åŸå› **: ãƒ¡ãƒ¢ãƒªä¸è¶³

**è§£æ±ºç­–**:
```bash
# ä»–ã®ã‚¢ãƒ—ãƒªã‚’é–‰ã˜ã‚‹
# Dockerã®ãƒ¡ãƒ¢ãƒªå‰²ã‚Šå½“ã¦ã‚’å¢—ã‚„ã™ï¼ˆDocker Desktopè¨­å®šï¼‰
```

### Native ImageãŒèµ·å‹•ã—ãªã„

**ã‚¨ãƒ©ãƒ¼**: `Error: Unrecognized option: -Xms128m`

**åŸå› **: Native Imageã«JVMã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’æ¸¡ã—ã¦ã„ã‚‹

**è§£æ±º**:
`run_quarkus_native.sh` ã¯JVMã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ä½¿ç”¨ã—ã¾ã›ã‚“ï¼ˆæ—¢ã«å¯¾å¿œæ¸ˆã¿ï¼‰

---

## ğŸ“š è£œè¶³è³‡æ–™

### ãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆ

```
.
â”œâ”€â”€ build_native.sh              # Native Imageãƒ“ãƒ«ãƒ‰ã‚¹ã‚¯ãƒªãƒ—ãƒˆ
â”œâ”€â”€ quarkus-todo/
â”‚   â”œâ”€â”€ pom.xml                  # nativeãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«è¿½åŠ æ¸ˆã¿
â”‚   â””â”€â”€ target/
â”‚       â”œâ”€â”€ quarkus-app/         # JVMãƒ¢ãƒ¼ãƒ‰ç”¨
â”‚       â””â”€â”€ *-runner             # Native Image
â”œâ”€â”€ spring-todo/
â”‚   â””â”€â”€ target/*.jar
â”œâ”€â”€ bench/
â”‚   â”œâ”€â”€ run_quarkus_native.sh   # Nativeèµ·å‹•
â”‚   â”œâ”€â”€ run_quarkus.sh          # JVMèµ·å‹•
â”‚   â”œâ”€â”€ run_spring.sh           # Springèµ·å‹•
â”‚   â”œâ”€â”€ run_benchmark.sh        # 3-Wayè‡ªå‹•ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯
â”‚   â”œâ”€â”€ summary.sh              # 3-Wayçµæœè¡¨ç¤º
â”‚   â””â”€â”€ ...
â”œâ”€â”€ results/
â”‚   â”œâ”€â”€ quarkus-native_idle.csv
â”‚   â”œâ”€â”€ quarkus_idle.csv
â”‚   â””â”€â”€ spring_idle.csv
â””â”€â”€ logs/
    â”œâ”€â”€ quarkus-native.log
    â”œâ”€â”€ quarkus.log
    â””â”€â”€ spring.log
```

### ã‚³ãƒãƒ³ãƒ‰ã‚¯ã‚¤ãƒƒã‚¯ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹

```bash
# ãƒ“ãƒ«ãƒ‰
./build_native.sh                    # Nativeãƒ“ãƒ«ãƒ‰
cd quarkus-todo && mvn package       # JVMãƒ“ãƒ«ãƒ‰
cd spring-todo && mvn package        # Springãƒ“ãƒ«ãƒ‰

# ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯
./bench/run_benchmark.sh             # 3-Wayè‡ªå‹•
./bench/summary.sh                   # çµæœè¡¨ç¤º

# æ‰‹å‹•èµ·å‹•
./bench/run_quarkus_native.sh        # Nativeèµ·å‹•
./bench/run_quarkus.sh               # JVMèµ·å‹•
./bench/run_spring.sh                # Springèµ·å‹•

# å‹•ä½œç¢ºèª
curl http://localhost:8081/health/ready
curl http://localhost:8081/swagger-ui
```

---

## âœ… ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

### ãƒ‡ãƒ¢å®Ÿè¡Œå‰

- [ ] Java 21 ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ¸ˆã¿
- [ ] Maven 3.8+ ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ¸ˆã¿
- [ ] Docker ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ¸ˆã¿ï¼ˆNativeç”¨ï¼‰
- [ ] JVMãƒ¢ãƒ¼ãƒ‰ãƒ“ãƒ«ãƒ‰å®Œäº†
- [ ] Native Imageãƒ“ãƒ«ãƒ‰å®Œäº†ï¼ˆã‚¹ã‚­ãƒƒãƒ—å¯ï¼‰
- [ ] ãƒãƒ¼ãƒˆ 8081, 8082 ãŒç©ºã„ã¦ã„ã‚‹
- [ ] ãƒ‡ã‚£ã‚¹ã‚¯å®¹é‡ 1GBä»¥ä¸Š

### Native Imageãƒ“ãƒ«ãƒ‰ç¢ºèª

- [ ] `quarkus-todo/target/*-runner` ãŒå­˜åœ¨
- [ ] ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚ºãŒ60-80MBç¨‹åº¦
- [ ] `./quarkus-todo/target/*-runner --version` ã§èµ·å‹•ç¢ºèª

### ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯å®Ÿè¡Œå¾Œ

- [ ] `results/` ã«3ã¤ã®CSVãƒ•ã‚¡ã‚¤ãƒ«ãŒç”Ÿæˆ
- [ ] `logs/` ã«3ã¤ã®ãƒ­ã‚°ãƒ•ã‚¡ã‚¤ãƒ«ãŒç”Ÿæˆ
- [ ] `./bench/summary.sh` ã§çµæœè¡¨ç¤º
- [ ] èµ·å‹•æ™‚é–“ãŒå¦¥å½“ï¼ˆNative < 100ms, Spring > 500msï¼‰

---

## ğŸ“ ã¾ã¨ã‚

### ã‚­ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸

1. **Quarkus Nativeã¯åœ§å€’çš„**: èµ·å‹•40å€ã€ãƒ¡ãƒ¢ãƒª85%å‰Šæ¸›
2. **Quarkus JVMã‚‚å„ªç§€**: Spring Bootã‚ˆã‚Š10å€é€Ÿãã€30%ãƒ¡ãƒ¢ãƒªå‰Šæ¸›
3. **ç”¨é€”ã«å¿œã˜ã¦é¸æŠ**: Native (ã‚¯ãƒ©ã‚¦ãƒ‰æœ€é©), JVM (é–‹ç™ºãƒ»äº’æ›æ€§)

### æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—

- [ ] è² è·ãƒ†ã‚¹ãƒˆã§ã®ã‚¹ãƒ«ãƒ¼ãƒ—ãƒƒãƒˆæ¯”è¼ƒ
- [ ] ã‚³ãƒ³ãƒ†ãƒŠç’°å¢ƒã§ã®å®Ÿæ¸¬
- [ ] å®Ÿãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã®PoC

---

**Document Version**: 2.0 (3-Way Comparison)
**Last Updated**: 2026-02-22
**Author**: Claude Code Demo
